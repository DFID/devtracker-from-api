!function(e,n){function t(){e(".proj-filter-exp-collapse-sign").click(function(){"+"==e(this).text()?(e(this).text("-"),e(this).parent().find("div[name=countries]").show("slow"),e(this).parent().find("div[name=regions]").show("slow"),e(this).parent().find("ul").show("slow")):(e(this).text("+"),e(this).parent().find("div[name=countries]").hide("slow"),e(this).parent().find("div[name=regions]").hide("slow"),e(this).parent().find("ul").hide("slow"))}),e(".proj-filter-exp-collapse-text").click(function(){e(this).parent().find(".proj-filter-exp-collapse-sign").each(function(){"+"==e(this).text()?(e(this).text("-"),e(this).parent().find("div[name=countries]").show("slow"),e(this).parent().find("div[name=regions]").show("slow"),e(this).parent().find("ul").show("slow")):(e(this).text("+"),e(this).parent().find("div[name=countries]").hide("slow"),e(this).parent().find("div[name=regions]").hide("slow"),e(this).parent().find("ul").hide("slow"))})})}function a(n){return-1!=e.inArray(!0,n)}function i(){var n=(e('input[name=status][type="hidden"]').parent("div"),new Date),t=new Date;e("input[name=dateStart][type='hidden']").each(function(e,t){var a=new Date(0);a=a.setUTCMilliseconds(t.value),a=new Date(a),n>a&&parseInt(t.value)>0&&(n=a)}),t=n,e("input[name=dateEnd][type='hidden']").each(function(e,n){var a=new Date(0);a=a.setUTCMilliseconds(n.value),a=new Date(a),a>t&&parseInt(n.value)>0&&(t=a)}),e("#date-slider-vertical").slider({orientation:"horizontal",range:!0,min:Date.parse(n),max:Date.parse(t),step:864e5,values:[Date.parse(n),Date.parse(t)],slide:function(n,t){var a=new Date(t.values[0]),i=new Date(t.values[1]);e("#date-range").html(a.customFormat("#DD# #MMM# #YYYY#")+" - "+i.customFormat("#DD# #MMM# #YYYY#"))},change:function(n,t){e(".search-result").each(function(n,a){var i=e(this),s=parseInt(i.children("input[name='dateStart']").val()),u=parseInt(i.children("input[name='dateEnd']").val());0>=s&&u>0&&u<=parseInt(t.values[1])?i.show():0>=u&&s>0&&s>=parseInt(t.values[0])?i.show():s>0&&u>0&&s>=parseInt(t.values[0])&&u<=parseInt(t.values[1])?i.show():i.hide()}),o()}}),e("#date-range").html(n.customFormat("#DD# #MMM# #YYYY#")+" - "+t.customFormat("#DD# #MMM# #YYYY#"))}function s(){var n=e('input[name=status][type="hidden"]').parent("div"),t=0,a=0;e("input[name=budget][type='hidden']").each(function(e,n){t<n.value&&(t=+n.value)}),e("#slider-vertical").slider({orientation:"horizontal",range:!0,min:a,max:t,step:100*Math.round(t/100)/100,values:[a,t],slide:function(n,t){e("#amount").html((""+t.values[0]).replace(/(\d)(?=(?:\d{3})+$)/g,"$1,")+" - "+(""+t.values[1]).replace(/(\d)(?=(?:\d{3})+$)/g,"$1,"))},change:function(t,a){e("input[type=checkbox]").is(":checked")?u(n):e(".search-result").each(function(n,t){var i=e(this);i.children("input[name='budget']").val()<=a.values[1]&&i.children("input[name='budget']").val()>=a.values[0]?i.show():i.hide()}),o()}}),e("#amount").html((""+a).replace(/(\d)(?=(?:\d{3})+$)/g,"$1,")+" - "+(""+t).replace(/(\d)(?=(?:\d{3})+$)/g,"$1,"))}function u(n){return e("input[type=checkbox]").is(":checked")||e("#slider-vertical").slider("option","values")[1]!=e("#slider-vertical").slider("option","max")?(n.each(function(n,t){var i=!1,s=[],u=!1;e("input:checked[name=status]").each(function(n,a){i=!0,u=!0,e(t).children('input[value*="'+a.value+'"][name="status"]').length>0&&s.push(!0)});var r=[],o=!1;e("input:checked[name=organizations]").each(function(n,a){i=!0,o=!0,e(t).children('input[value*="'+a.value+'"][name="organizations"]').length>0&&r.push(!0)});var c=[],l=!1;e("input:checked[name=sectors]").each(function(n,a){i=!0,l=!0,e(t).children('input[value*="'+a.value+'"][name="sectors"]').length>0&&c.push(!0)});var h=[],d=!1;e("input:checked[name=countries]").each(function(n,a){i=!0,d=!0,e(t).children('input[value*="'+a.value+'"][name="countries"]').length>0&&h.push(!0)});var p=[],v=!1;e("input:checked[name=regions]").each(function(n,a){i=!0,v=!0,e(t).children('input[value*="'+a.value+'"][name="regions"]').length>0&&p.push(!0)});var m=[],f=!1;e("input:checked[name=documents]").each(function(n,a){i=!0,f=!0,e(t).children('input[value*="'+a.value+'"][name="documents"]').length>0&&m.push(!0)});var g=[];u&&g.push(a(s)),o&&g.push(a(r)),l&&g.push(a(c)),(v||d)&&g.push(a(p)||a(h));var w=+e(t).children('input[name="budget"]').val(),y=+e("#slider-vertical").slider("option","values")[0],D=+e("#slider-vertical").slider("option","values")[1];(w>D||y>w)&&g.push(!1),f&&g.push(a(m)),-1!=e.inArray(!1,g)?e(t).hide():e(t).show(),i||e(".search-result").css("display","none")}),void o()):(e(".search-result").show(),o(),!1)}function r(){var n=e('input[name=status][type="hidden"]').parent("div");e("input[type=checkbox]").change(function(){u(n)})}function o(){e("span[name=afterFilteringAmount]").html(e(".search-result").length-e(".search-result:hidden").length+" of ")}function c(e,n){var t=e.toLowerCase(),a=n.toLowerCase();return a>t?-1:t>a?1:0}function l(){m=m.sort(c),y=y.sort(c),f=f.sort(c),g=g.sort(c),w=w.sort(c),D=D.sort(c)}function h(n,t){var a=n.split("#");e.each(a,function(n,a){a.length>0&&-1==e.inArray(a,t)&&t.push(a)})}function d(){e(".search-result input[name=status]").each(function(){h(e(this).attr("value"),m)}),e(".search-result input[name=sectors]").each(function(){h(e(this).attr("value"),y)}),e(".search-result input[name=organizations]").each(function(){h(e(this).attr("value"),w)}),e(".search-result input[name=countries]").each(function(){h(e(this).attr("value"),f)}),e(".search-result input[name=regions]").each(function(){h(e(this).attr("value"),g)}),e(".search-result input[name=documents]").each(function(){h(e(this).attr("value"),D)})}function p(){e("div[name=status], div[name=sectors], div[name=organizations], div[name=regions], div[name=countries], div[name=documents]").append("<ul></ul>"),m.length<2?e("div[name=status]").hide():(e.each(m,function(n,t){e("div[name=status] ul").append(v("status",t))}),e("div[name=status] ul").css("display","none")),y.length<2?e("div[name=sectors]").hide():(e.each(y,function(n,t){e("div[name=sectors] ul").append(v("sectors",t))}),e("div[name=sectors] ul").css("display","none")),w.length<2?e("div[name=organizations]").hide():(e.each(w,function(n,t){e("div[name=organizations] ul").append(v("organizations",t))}),e("div[name=organizations] ul").css("display","none")),f.length<2?e("div[name=countries]").hide():(e.each(f,function(n,t){e("div[name=countries] ul").append(v("countries",t))}),e("div[name=countries] ul").css("display","none")),g.length<2?e("div[name=regions]").hide():(e.each(g,function(n,t){e("div[name=regions] ul").append(v("regions",t))}),e("div[name=regions] ul").css("display","none")),D.length<2?e("div[name=documents]").hide():(e.each(D,function(n,t){e("div[name=documents] ul").append(v("documents",t))}),e("div[name=documents] ul").css("display","none")),f.length<2&&g.length<2&&e("div[name=locations]").hide()}function v(e,n){var t=Math.floor(1e8*Math.random())+"";return"<li><label title='"+n+"' for='"+t+"' style='white-space:nowrap; text-overflow: ellipsis; overflow: hidden;'><input type='checkbox' name='"+e+"' id='"+t+"' value='"+n+"'/>"+n+"</label></li>"}e(document).ready(function(){d(),l(),p(),r(),t(),s(),i()});var m=[],f=[],g=[],w=[],y=[],D=[]}(jQuery);