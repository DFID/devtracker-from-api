/*
 * Copyright 2012 Small Batch, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not
 * use this file except in compliance with the License. You may obtain a copy of
 * the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 * License for the specific language governing permissions and limitations under
 * the License.
 */
var webfont={};webfont.bind=function(a,b,c){var d=arguments.length>2?Array.prototype.slice.call(arguments,2):[];return function(){return d.push.apply(d,arguments),b.apply(a,d)}},webfont.extendsClass=function(a,b){function c(){}c.prototype=a.prototype,b.prototype=new c,b.prototype.constructor=b,b.superCtor_=a,b.super_=a.prototype},webfont.DomHelper=function(a,b){this.document_=a,this.userAgent_=b},webfont.DomHelper.prototype.createElement=function(a,b,c){var d=this.document_.createElement(a);if(b)for(var e in b)b.hasOwnProperty(e)&&(e=="style"?this.setStyle(d,b[e]):d.setAttribute(e,b[e]));return c&&d.appendChild(this.document_.createTextNode(c)),d},webfont.DomHelper.prototype.insertInto=function(a,b){var c=this.document_.getElementsByTagName(a)[0];return c||(c=document.documentElement),c&&c.lastChild?(c.insertBefore(b,c.lastChild),!0):!1},webfont.DomHelper.prototype.whenBodyExists=function(a){var b=function(){document.body?a():setTimeout(b,0)};b()},webfont.DomHelper.prototype.removeElement=function(a){return a.parentNode?(a.parentNode.removeChild(a),!0):!1},webfont.DomHelper.prototype.createCssLink=function(a){return this.createElement("link",{rel:"stylesheet",href:a})},webfont.DomHelper.prototype.createScriptSrc=function(a){return this.createElement("script",{src:a})},webfont.DomHelper.prototype.appendClassName=function(a,b){var c=a.className.split(/\s+/);for(var d=0,e=c.length;d<e;d++)if(c[d]==b)return;c.push(b),a.className=c.join(" ").replace(/^\s+/,"")},webfont.DomHelper.prototype.removeClassName=function(a,b){var c=a.className.split(/\s+/),d=[];for(var e=0,f=c.length;e<f;e++)c[e]!=b&&d.push(c[e]);a.className=d.join(" ").replace(/^\s+/,"").replace(/\s+$/,"")},webfont.DomHelper.prototype.hasClassName=function(a,b){var c=a.className.split(/\s+/);for(var d=0,e=c.length;d<e;d++)if(c[d]==b)return!0;return!1},webfont.DomHelper.prototype.setStyle=function(a,b){this.userAgent_.getName()=="MSIE"?a.style.cssText=b:a.setAttribute("style",b)},webfont.UserAgent=function(a,b,c,d,e,f,g,h){this.name_=a,this.version_=b,this.engine_=c,this.engineVersion_=d,this.platform_=e,this.platformVersion_=f,this.documentMode_=g,this.webFontSupport_=h},webfont.UserAgent.prototype.getName=function(){return this.name_},webfont.UserAgent.prototype.getVersion=function(){return this.version_},webfont.UserAgent.prototype.getEngine=function(){return this.engine_},webfont.UserAgent.prototype.getEngineVersion=function(){return this.engineVersion_},webfont.UserAgent.prototype.getPlatform=function(){return this.platform_},webfont.UserAgent.prototype.getPlatformVersion=function(){return this.platformVersion_},webfont.UserAgent.prototype.getDocumentMode=function(){return this.documentMode_},webfont.UserAgent.prototype.isSupportingWebFont=function(){return this.webFontSupport_},webfont.UserAgentParser=function(a,b){this.userAgent_=a,this.doc_=b},webfont.UserAgentParser.UNKNOWN="Unknown",webfont.UserAgentParser.UNKNOWN_USER_AGENT=new webfont.UserAgent(webfont.UserAgentParser.UNKNOWN,webfont.UserAgentParser.UNKNOWN,webfont.UserAgentParser.UNKNOWN,webfont.UserAgentParser.UNKNOWN,webfont.UserAgentParser.UNKNOWN,webfont.UserAgentParser.UNKNOWN,undefined,!1),webfont.UserAgentParser.prototype.parse=function(){return this.isIe_()?this.parseIeUserAgentString_():this.isOpera_()?this.parseOperaUserAgentString_():this.isWebKit_()?this.parseWebKitUserAgentString_():this.isGecko_()?this.parseGeckoUserAgentString_():webfont.UserAgentParser.UNKNOWN_USER_AGENT},webfont.UserAgentParser.prototype.getPlatform_=function(){var a=this.getMatchingGroup_(this.userAgent_,/(iPod|iPad|iPhone|Android)/,1);if(a!="")return a;var b=this.getMatchingGroup_(this.userAgent_,/(Linux|Mac_PowerPC|Macintosh|Windows)/,1);return b!=""?(b=="Mac_PowerPC"&&(b="Macintosh"),b):webfont.UserAgentParser.UNKNOWN},webfont.UserAgentParser.prototype.getPlatformVersion_=function(){var a=this.getMatchingGroup_(this.userAgent_,/(OS X|Windows NT|Android) ([^;)]+)/,2);if(a)return a;var b=this.getMatchingGroup_(this.userAgent_,/(iPhone )?OS ([\d_]+)/,2);if(b)return b;var c=this.getMatchingGroup_(this.userAgent_,/Linux ([i\d]+)/,1);return c?c:webfont.UserAgentParser.UNKNOWN},webfont.UserAgentParser.prototype.isIe_=function(){return this.userAgent_.indexOf("MSIE")!=-1},webfont.UserAgentParser.prototype.parseIeUserAgentString_=function(){var a=this.getMatchingGroup_(this.userAgent_,/(MSIE [\d\w\.]+)/,1),b=webfont.UserAgentParser.UNKNOWN,c=webfont.UserAgentParser.UNKNOWN;if(a!=""){var d=a.split(" "),e=d[0],f=d[1];return new webfont.UserAgent(e,f,e,f,this.getPlatform_(),this.getPlatformVersion_(),this.getDocumentMode_(this.doc_),this.getMajorVersion_(f)>=6)}return new webfont.UserAgent("MSIE",webfont.UserAgentParser.UNKNOWN,"MSIE",webfont.UserAgentParser.UNKNOWN,this.getPlatform_(),this.getPlatformVersion_(),this.getDocumentMode_(this.doc_),!1)},webfont.UserAgentParser.prototype.isOpera_=function(){return this.userAgent_.indexOf("Opera")!=-1},webfont.UserAgentParser.prototype.parseOperaUserAgentString_=function(){var a=webfont.UserAgentParser.UNKNOWN,b=webfont.UserAgentParser.UNKNOWN,c=this.getMatchingGroup_(this.userAgent_,/(Presto\/[\d\w\.]+)/,1);if(c!=""){var d=c.split("/");a=d[0],b=d[1]}else{this.userAgent_.indexOf("Gecko")!=-1&&(a="Gecko");var e=this.getMatchingGroup_(this.userAgent_,/rv:([^\)]+)/,1);e!=""&&(b=e)}if(this.userAgent_.indexOf("Version/")!=-1){var f=this.getMatchingGroup_(this.userAgent_,/Version\/([\d\.]+)/,1);if(f!="")return new webfont.UserAgent("Opera",f,a,b,this.getPlatform_(),this.getPlatformVersion_(),this.getDocumentMode_(this.doc_),this.getMajorVersion_(f)>=10)}var f=this.getMatchingGroup_(this.userAgent_,/Opera[\/ ]([\d\.]+)/,1);return f!=""?new webfont.UserAgent("Opera",f,a,b,this.getPlatform_(),this.getPlatformVersion_(),this.getDocumentMode_(this.doc_),this.getMajorVersion_(f)>=10):new webfont.UserAgent("Opera",webfont.UserAgentParser.UNKNOWN,a,b,this.getPlatform_(),this.getPlatformVersion_(),this.getDocumentMode_(this.doc_),!1)},webfont.UserAgentParser.prototype.isWebKit_=function(){return this.userAgent_.indexOf("AppleWebKit")!=-1},webfont.UserAgentParser.prototype.parseWebKitUserAgentString_=function(){var a=this.getPlatform_(),b=this.getPlatformVersion_(),c=this.getMatchingGroup_(this.userAgent_,/AppleWebKit\/([\d\.\+]+)/,1);c==""&&(c=webfont.UserAgentParser.UNKNOWN);var d=webfont.UserAgentParser.UNKNOWN;this.userAgent_.indexOf("Chrome")!=-1?d="Chrome":this.userAgent_.indexOf("Safari")!=-1?d="Safari":this.userAgent_.indexOf("AdobeAIR")!=-1&&(d="AdobeAIR");var e=webfont.UserAgentParser.UNKNOWN;this.userAgent_.indexOf("Version/")!=-1?e=this.getMatchingGroup_(this.userAgent_,/Version\/([\d\.\w]+)/,1):d=="Chrome"?e=this.getMatchingGroup_(this.userAgent_,/Chrome\/([\d\.]+)/,1):d=="AdobeAIR"&&(e=this.getMatchingGroup_(this.userAgent_,/AdobeAIR\/([\d\.]+)/,1));var f=!1;if(d=="AdobeAIR"){var g=this.getMatchingGroup_(e,/\d+\.(\d+)/,1);f=this.getMajorVersion_(e)>2||this.getMajorVersion_(e)==2&&parseInt(g,10)>=5}else{var g=this.getMatchingGroup_(c,/\d+\.(\d+)/,1);f=this.getMajorVersion_(c)>=526||this.getMajorVersion_(c)>=525&&parseInt(g,10)>=13}return new webfont.UserAgent(d,e,"AppleWebKit",c,a,b,this.getDocumentMode_(this.doc_),f)},webfont.UserAgentParser.prototype.isGecko_=function(){return this.userAgent_.indexOf("Gecko")!=-1},webfont.UserAgentParser.prototype.parseGeckoUserAgentString_=function(){var a=webfont.UserAgentParser.UNKNOWN,b=webfont.UserAgentParser.UNKNOWN,c=!1;if(this.userAgent_.indexOf("Firefox")!=-1){a="Firefox";var d=this.getMatchingGroup_(this.userAgent_,/Firefox\/([\d\w\.]+)/,1);if(d!=""){var e=this.getMatchingGroup_(d,/\d+\.(\d+)/,1);b=d,c=d!=""&&this.getMajorVersion_(d)>=3&&parseInt(e,10)>=5}}else this.userAgent_.indexOf("Mozilla")!=-1&&(a="Mozilla");var f=this.getMatchingGroup_(this.userAgent_,/rv:([^\)]+)/,1);if(f=="")f=webfont.UserAgentParser.UNKNOWN;else if(!c){var g=this.getMajorVersion_(f),h=parseInt(this.getMatchingGroup_(f,/\d+\.(\d+)/,1),10),i=parseInt(this.getMatchingGroup_(f,/\d+\.\d+\.(\d+)/,1),10);c=g>1||g==1&&h>9||g==1&&h==9&&i>=2||f.match(/1\.9\.1b[123]/)!=null||f.match(/1\.9\.1\.[\d\.]+/)!=null}return new webfont.UserAgent(a,b,"Gecko",f,this.getPlatform_(),this.getPlatformVersion_(),this.getDocumentMode_(this.doc_),c)},webfont.UserAgentParser.prototype.getMajorVersion_=function(a){var b=this.getMatchingGroup_(a,/(\d+)/,1);return b!=""?parseInt(b,10):-1},webfont.UserAgentParser.prototype.getMatchingGroup_=function(a,b,c){var d=a.match(b);return d&&d[c]?d[c]:""},webfont.UserAgentParser.prototype.getDocumentMode_=function(a){return a.documentMode?a.documentMode:undefined},webfont.EventDispatcher=function(a,b,c,d){this.domHelper_=a,this.htmlElement_=b,this.callbacks_=c,this.namespace_=d||webfont.EventDispatcher.DEFAULT_NAMESPACE,this.cssClassName_=new webfont.CssClassName("-")},webfont.EventDispatcher.DEFAULT_NAMESPACE="wf",webfont.EventDispatcher.LOADING="loading",webfont.EventDispatcher.ACTIVE="active",webfont.EventDispatcher.INACTIVE="inactive",webfont.EventDispatcher.FONT="font",webfont.EventDispatcher.prototype.dispatchLoading=function(){this.domHelper_.appendClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,webfont.EventDispatcher.LOADING)),this.dispatch_(webfont.EventDispatcher.LOADING)},webfont.EventDispatcher.prototype.dispatchFontLoading=function(a,b){this.domHelper_.appendClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,a,b,webfont.EventDispatcher.LOADING)),this.dispatch_(webfont.EventDispatcher.FONT+webfont.EventDispatcher.LOADING,a,b)},webfont.EventDispatcher.prototype.dispatchFontActive=function(a,b){this.domHelper_.removeClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,a,b,webfont.EventDispatcher.LOADING)),this.domHelper_.removeClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,a,b,webfont.EventDispatcher.INACTIVE)),this.domHelper_.appendClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,a,b,webfont.EventDispatcher.ACTIVE)),this.dispatch_(webfont.EventDispatcher.FONT+webfont.EventDispatcher.ACTIVE,a,b)},webfont.EventDispatcher.prototype.dispatchFontInactive=function(a,b){this.domHelper_.removeClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,a,b,webfont.EventDispatcher.LOADING));var c=this.domHelper_.hasClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,a,b,webfont.EventDispatcher.ACTIVE));c||this.domHelper_.appendClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,a,b,webfont.EventDispatcher.INACTIVE)),this.dispatch_(webfont.EventDispatcher.FONT+webfont.EventDispatcher.INACTIVE,a,b)},webfont.EventDispatcher.prototype.dispatchInactive=function(){this.domHelper_.removeClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,webfont.EventDispatcher.LOADING));var a=this.domHelper_.hasClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,webfont.EventDispatcher.ACTIVE));a||this.domHelper_.appendClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,webfont.EventDispatcher.INACTIVE)),this.dispatch_(webfont.EventDispatcher.INACTIVE)},webfont.EventDispatcher.prototype.dispatchActive=function(){this.domHelper_.removeClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,webfont.EventDispatcher.LOADING)),this.domHelper_.removeClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,webfont.EventDispatcher.INACTIVE)),this.domHelper_.appendClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,webfont.EventDispatcher.ACTIVE)),this.dispatch_(webfont.EventDispatcher.ACTIVE)},webfont.EventDispatcher.prototype.dispatch_=function(a,b,c){this.callbacks_[a]&&this.callbacks_[a](b,c)},webfont.FontModuleLoader=function(){this.modules_={}},webfont.FontModuleLoader.prototype.addModuleFactory=function(a,b){this.modules_[a]=b},webfont.FontModuleLoader.prototype.getModules=function(a){var b=[];for(var c in a)if(a.hasOwnProperty(c)){var d=this.modules_[c];d&&b.push(d(a[c]))}return b},webfont.FontWatcher=function(a,b,c,d,e){this.domHelper_=a,this.eventDispatcher_=b,this.fontSizer_=c,this.asyncCall_=d,this.getTime_=e,this.currentlyWatched_=0,this.last_=!1,this.success_=!1},webfont.FontWatcher.DEFAULT_VARIATION="n4",webfont.FontWatcher.prototype.watch=function(a,b,c,d,e){var f=a.length;for(var g=0;g<f;g++){var h=a[g];b[h]||(b[h]=[webfont.FontWatcher.DEFAULT_VARIATION]),this.currentlyWatched_+=b[h].length}e&&(this.last_=e);for(var g=0;g<f;g++){var h=a[g],i=b[h],j=c[h];for(var k=0,l=i.length;k<l;k++){var m=i[k];this.eventDispatcher_.dispatchFontLoading(h,m);var n=webfont.bind(this,this.fontActive_),o=webfont.bind(this,this.fontInactive_),p=new d(n,o,this.domHelper_,this.fontSizer_,this.asyncCall_,this.getTime_,h,m,j);p.start()}}},webfont.FontWatcher.prototype.fontActive_=function(a,b){this.eventDispatcher_.dispatchFontActive(a,b),this.success_=!0,this.decreaseCurrentlyWatched_()},webfont.FontWatcher.prototype.fontInactive_=function(a,b){this.eventDispatcher_.dispatchFontInactive(a,b),this.decreaseCurrentlyWatched_()},webfont.FontWatcher.prototype.decreaseCurrentlyWatched_=function(){--this.currentlyWatched_==0&&this.last_&&(this.success_?this.eventDispatcher_.dispatchActive():this.eventDispatcher_.dispatchInactive())},webfont.FontWatchRunner=function(a,b,c,d,e,f,g,h,i){this.activeCallback_=a,this.inactiveCallback_=b,this.domHelper_=c,this.fontSizer_=d,this.asyncCall_=e,this.getTime_=f,this.nameHelper_=new webfont.CssFontFamilyName,this.fvd_=new webfont.FontVariationDescription,this.fontFamily_=g,this.fontDescription_=h,this.fontTestString_=i||webfont.FontWatchRunner.DEFAULT_TEST_STRING,this.originalSizeA_=this.getDefaultFontSize_(webfont.FontWatchRunner.DEFAULT_FONTS_A),this.originalSizeB_=this.getDefaultFontSize_(webfont.FontWatchRunner.DEFAULT_FONTS_B),this.lastObservedSizeA_=this.originalSizeA_,this.lastObservedSizeB_=this.originalSizeB_,this.requestedFontA_=this.createHiddenElementWithFont_(webfont.FontWatchRunner.DEFAULT_FONTS_A),this.requestedFontB_=this.createHiddenElementWithFont_(webfont.FontWatchRunner.DEFAULT_FONTS_B)},webfont.FontWatchRunner.DEFAULT_FONTS_A="arial,'URW Gothic L',sans-serif",webfont.FontWatchRunner.DEFAULT_FONTS_B="Georgia,'Century Schoolbook L',serif",webfont.FontWatchRunner.DEFAULT_TEST_STRING="BESbswy",webfont.FontWatchRunner.prototype.start=function(){this.started_=this.getTime_(),this.check_()},webfont.FontWatchRunner.prototype.check_=function(){var a=this.fontSizer_.getWidth(this.requestedFontA_),b=this.fontSizer_.getWidth(this.requestedFontB_);this.originalSizeA_==a&&this.originalSizeB_==b||this.lastObservedSizeA_!=a||this.lastObservedSizeB_!=b?this.getTime_()-this.started_>=5e3?this.finish_(this.inactiveCallback_):(this.lastObservedSizeA_=a,this.lastObservedSizeB_=b,this.asyncCheck_()):this.finish_(this.activeCallback_)},webfont.FontWatchRunner.prototype.asyncCheck_=function(){this.asyncCall_(function(a,b){return function(){b.call(a)}}(this,this.check_),25)},webfont.FontWatchRunner.prototype.finish_=function(a){this.domHelper_.removeElement(this.requestedFontA_),this.domHelper_.removeElement(this.requestedFontB_),a(this.fontFamily_,this.fontDescription_)},webfont.FontWatchRunner.prototype.getDefaultFontSize_=function(a){var b=this.createHiddenElementWithFont_(a,!0),c=this.fontSizer_.getWidth(b);return this.domHelper_.removeElement(b),c},webfont.FontWatchRunner.prototype.createHiddenElementWithFont_=function(a,b){var c=this.computeStyleString_(a,this.fontDescription_,b),d=this.domHelper_.createElement("span",{style:c},this.fontTestString_);return this.domHelper_.insertInto("body",d),d},webfont.FontWatchRunner.prototype.computeStyleString_=function(a,b,c){var d=this.fvd_.expand(b),e="position:absolute;top:-999px;left:-999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;font-family:"+(c?"":this.nameHelper_.quote(this.fontFamily_)+",")+a+";"+d;return e},webfont.WebFont=function(a,b,c,d,e){this.domHelper_=a,this.fontModuleLoader_=b,this.htmlElement_=c,this.asyncCall_=d,this.userAgent_=e,this.moduleLoading_=0,this.moduleFailedLoading_=0},webfont.WebFont.prototype.addModule=function(a,b){this.fontModuleLoader_.addModuleFactory(a,b)},webfont.WebFont.prototype.load=function(a){var b=new webfont.EventDispatcher(this.domHelper_,this.htmlElement_,a);this.userAgent_.isSupportingWebFont()?this.load_(b,a):b.dispatchInactive()},webfont.WebFont.prototype.isModuleSupportingUserAgent_=function(a,b,c,d){var e=a.getFontWatchRunnerCtor?a.getFontWatchRunnerCtor():webfont.FontWatchRunner;if(!d){var f=--this.moduleLoading_==0;this.moduleFailedLoading_--,f&&(this.moduleFailedLoading_==0?b.dispatchInactive():b.dispatchLoading()),c.watch([],{},{},e,f);return}a.load(webfont.bind(this,this.onModuleReady_,b,c,e))},webfont.WebFont.prototype.onModuleReady_=function(a,b,c,d,e,f){var g=--this.moduleLoading_==0;g&&a.dispatchLoading(),this.asyncCall_(webfont.bind(this,function(a,b,c,d,e,f){a.watch(b,c||{},d||{},e,f)},b,d,e,f,c,g))},webfont.WebFont.prototype.load_=function(a,b){var c=this.fontModuleLoader_.getModules(b),d=this;this.moduleFailedLoading_=this.moduleLoading_=c.length;var e=new webfont.FontWatcher(this.domHelper_,a,{getWidth:function(a){return a.offsetWidth}},d.asyncCall_,function(){return(new Date).getTime()});for(var f=0,g=c.length;f<g;f++){var h=c[f];h.supportUserAgent(this.userAgent_,webfont.bind(this,this.isModuleSupportingUserAgent_,h,a,e))}},webfont.CssClassName=function(a){this.joinChar_=a||webfont.CssClassName.DEFAULT_JOIN_CHAR},webfont.CssClassName.DEFAULT_JOIN_CHAR="-",webfont.CssClassName.prototype.sanitize=function(a){return a.replace(/[\W_]+/g,"").toLowerCase()},webfont.CssClassName.prototype.build=function(a){var b=[];for(var c=0;c<arguments.length;c++)b.push(this.sanitize(arguments[c]));return b.join(this.joinChar_)},webfont.CssFontFamilyName=function(){this.quote_="'"},webfont.CssFontFamilyName.prototype.quote=function(a){var b=[],c=a.split(/,\s*/);for(var d=0;d<c.length;d++){var e=c[d].replace(/['"]/g,"");e.indexOf(" ")==-1?b.push(e):b.push(this.quote_+e+this.quote_)}return b.join(",")},webfont.FontVariationDescription=function(){this.properties_=webfont.FontVariationDescription.PROPERTIES,this.values_=webfont.FontVariationDescription.VALUES},webfont.FontVariationDescription.PROPERTIES=["font-style","font-weight"],webfont.FontVariationDescription.VALUES={"font-style":[["n","normal"],["i","italic"],["o","oblique"]],"font-weight":[["1","100"],["2","200"],["3","300"],["4","400"],["5","500"],["6","600"],["7","700"],["8","800"],["9","900"],["4","normal"],["7","bold"]]},webfont.FontVariationDescription.Item=function(a,b,c){this.index_=a,this.property_=b,this.values_=c},webfont.FontVariationDescription.Item.prototype.compact=function(a,b){for(var c=0;c<this.values_.length;c++)if(b==this.values_[c][1]){a[this.index_]=this.values_[c][0];return}},webfont.FontVariationDescription.Item.prototype.expand=function(a,b){for(var c=0;c<this.values_.length;c++)if(b==this.values_[c][0]){a[this.index_]=this.property_+":"+this.values_[c][1];return}},webfont.FontVariationDescription.prototype.compact=function(a){var b=["n","4"],c=a.split(";");for(var d=0,e=c.length;d<e;d++){var f=c[d].replace(/\s+/g,"").split(":");if(f.length==2){var g=f[0],h=f[1],i=this.getItem_(g);i&&i.compact(b,h)}}return b.join("")},webfont.FontVariationDescription.prototype.expand=function(a){if(a.length!=2)return null;var b=[null,null];for(var c=0,d=this.properties_.length;c<d;c++){var e=this.properties_[c],f=a.substr(c,1),g=this.values_[e],h=new webfont.FontVariationDescription.Item(c,e,g);h.expand(b,f)}return b[0]&&b[1]?b.join(";")+";":null},webfont.FontVariationDescription.prototype.getItem_=function(a){for(var b=0;b<this.properties_.length;b++)if(a==this.properties_[b]){var c=this.values_[a];return new webfont.FontVariationDescription.Item(b,a,c)}return null};var globalName="WebFont";window[globalName]=function(){var a=new webfont.UserAgentParser(navigator.userAgent,document),b=a.parse(),c=new webfont.DomHelper(document,b),d=function(a,b){setTimeout(a,b)};return new webfont.WebFont(c,new webfont.FontModuleLoader,document.documentElement,d,b)}(),window[globalName].load=window[globalName].load,window[globalName].addModule=window[globalName].addModule,webfont.UserAgent.prototype.getName=webfont.UserAgent.prototype.getName,webfont.UserAgent.prototype.getVersion=webfont.UserAgent.prototype.getVersion,webfont.UserAgent.prototype.getEngine=webfont.UserAgent.prototype.getEngine,webfont.UserAgent.prototype.getEngineVersion=webfont.UserAgent.prototype.getEngineVersion,webfont.UserAgent.prototype.getPlatform=webfont.UserAgent.prototype.getPlatform,webfont.UserAgent.prototype.getPlatformVersion=webfont.UserAgent.prototype.getPlatformVersion,webfont.UserAgent.prototype.getDocumentMode=webfont.UserAgent.prototype.getDocumentMode,webfont.UserAgent.prototype.isSupportingWebFont=webfont.UserAgent.prototype.isSupportingWebFont,webfont.AscenderScript=function(a,b){this.domHelper_=a,this.configuration_=b},webfont.AscenderScript.NAME="ascender",webfont.AscenderScript.VARIATIONS={regular:"n4",bold:"n7",italic:"i4",bolditalic:"i7",r:"n4",b:"n7",i:"i4",bi:"i7"},webfont.AscenderScript.prototype.supportUserAgent=function(a,b){return b(a.isSupportingWebFont())},webfont.AscenderScript.prototype.load=function(a){var b=this.configuration_.key,c="https:"==document.location.protocol?"https:":"http:",d=c+"//webfonts.fontslive.com/css/"+b+".css";this.domHelper_.insertInto("head",this.domHelper_.createCssLink(d));var e=this.parseFamiliesAndVariations(this.configuration_.families);a(e.families,e.variations)},webfont.AscenderScript.prototype.parseFamiliesAndVariations=function(a){var b,c,d;b=[],c={};for(var e=0,f=a.length;e<f;e++)d=this.parseFamilyAndVariations(a[e]),b.push(d.family),c[d.family]=d.variations;return{families:b,variations:c}},webfont.AscenderScript.prototype.parseFamilyAndVariations=function(a){var b,c,d;return d=a.split(":"),b=d[0],c=[],d[1]?c=this.parseVariations(d[1]):c=["n4"],{family:b,variations:c}},webfont.AscenderScript.prototype.parseVariations=function(a){var b=a.split(","),c=[];for(var d=0,e=b.length;d<e;d++){var f=b[d];if(f){var g=webfont.AscenderScript.VARIATIONS[f];c.push(g?g:f)}}return c},window.WebFont.addModule(webfont.AscenderScript.NAME,function(a){var b=new webfont.UserAgentParser(navigator.userAgent,document),c=b.parse(),d=new webfont.DomHelper(document,c);return new webfont.AscenderScript(d,a)}),webfont.LastResortWebKitFontWatchRunner=function(a,b,c,d,e,f,g,h,i){webfont.LastResortWebKitFontWatchRunner.superCtor_.call(this,a,b,c,d,e,f,g,h,i),this.webKitLastResortFontSizes_=this.setUpWebKitLastResortFontSizes_(),this.webKitLastResortSizeChange_=!1},webfont.extendsClass(webfont.FontWatchRunner,webfont.LastResortWebKitFontWatchRunner),webfont.LastResortWebKitFontWatchRunner.METRICS_COMPATIBLE_FONTS={Arimo:!0,Cousine:!0,Tinos:!0},webfont.LastResortWebKitFontWatchRunner.prototype.setUpWebKitLastResortFontSizes_=function(){var a=["Times New Roman","Lucida Sans Unicode","Courier New","Tahoma","Arial","Microsoft Sans Serif","Times","Lucida Console","Sans","Serif","Monospace"],b=a.length,c={},d=this.createHiddenElementWithFont_(a[0],!0);c[this.fontSizer_.getWidth(d)]=!0;for(var e=1;e<b;e++){var f=a[e];this.domHelper_.setStyle(d,this.computeStyleString_(f,this.fontDescription_,!0)),c[this.fontSizer_.getWidth(d)]=!0,this.fontDescription_[1]!="4"&&(this.domHelper_.setStyle(d,this.computeStyleString_(f,this.fontDescription_[0]+"4",!0)),c[this.fontSizer_.getWidth(d)]=!0)}return this.domHelper_.removeElement(d),c},webfont.LastResortWebKitFontWatchRunner.prototype.check_=function(){var a=this.fontSizer_.getWidth(this.requestedFontA_),b=this.fontSizer_.getWidth(this.requestedFontB_);!this.webKitLastResortSizeChange_&&a==b&&this.webKitLastResortFontSizes_[a]&&(this.webKitLastResortFontSizes_={},this.webKitLastResortFontSizes_[a]=!0,this.webKitLastResortSizeChange_=!0),(this.originalSizeA_!=a||this.originalSizeB_!=b)&&!this.webKitLastResortFontSizes_[a]&&!this.webKitLastResortFontSizes_[b]?this.finish_(this.activeCallback_):this.getTime_()-this.started_>=5e3?this.webKitLastResortFontSizes_[a]&&this.webKitLastResortFontSizes_[b]&&webfont.LastResortWebKitFontWatchRunner.METRICS_COMPATIBLE_FONTS[this.fontFamily_]?this.finish_(this.activeCallback_):this.finish_(this.inactiveCallback_):this.asyncCheck_()},webfont.FontApiUrlBuilder=function(a){if(a)this.apiUrl_=a;else{var b="https:"==window.location.protocol?"https:":"http:";this.apiUrl_=b+webfont.FontApiUrlBuilder.DEFAULT_API_URL}this.fontFamilies_=[],this.subsets_=[]},webfont.FontApiUrlBuilder.DEFAULT_API_URL="//fonts.googleapis.com/css",webfont.FontApiUrlBuilder.prototype.setFontFamilies=function(a){this.parseFontFamilies_(a)},webfont.FontApiUrlBuilder.prototype.parseFontFamilies_=function(a){var b=a.length;for(var c=0;c<b;c++){var d=a[c].split(":");d.length==3&&this.subsets_.push(d.pop()),this.fontFamilies_.push(d.join(":"))}},webfont.FontApiUrlBuilder.prototype.webSafe=function(a){return a.replace(/ /g,"+")},webfont.FontApiUrlBuilder.prototype.build=function(){if(this.fontFamilies_.length==0)throw new Error("No fonts to load !");if(this.apiUrl_.indexOf("kit=")!=-1)return this.apiUrl_;var a=this.fontFamilies_.length,b=[];for(var c=0;c<a;c++)b.push(this.webSafe(this.fontFamilies_[c]));var d=this.apiUrl_+"?family="+b.join("%7C");return this.subsets_.length>0&&(d+="&subset="+this.subsets_.join(",")),d},webfont.FontApiParser=function(a){this.fontFamilies_=a,this.parsedFontFamilies_=[],this.variations_={},this.fontTestStrings_={},this.fvd_=new webfont.FontVariationDescription},webfont.FontApiParser.VARIATIONS={ultralight:"n2",light:"n3",regular:"n4",bold:"n7",italic:"i4",bolditalic:"i7",ul:"n2",l:"n3",r:"n4",b:"n7",i:"i4",bi:"i7"},webfont.FontApiParser.INT_FONTS={latin:webfont.FontWatchRunner.DEFAULT_TEST_STRING,cyrillic:"&#1081;&#1103;&#1046;",greek:"&#945;&#946;&#931;",khmer:"&#x1780;&#x1781;&#x1782;",Hanuman:"&#x1780;&#x1781;&#x1782;"},webfont.FontApiParser.prototype.parse=function(){var a=this.fontFamilies_.length;for(var b=0;b<a;b++){var c=this.fontFamilies_[b].split(":"),d=c[0],e=["n4"];if(c.length>=2){var f=this.parseVariations_(c[1]);f.length>0&&(e=f);if(c.length==3){var g=this.parseSubsets_(c[2]);if(g.length>0){var h=webfont.FontApiParser.INT_FONTS[g[0]];h&&(this.fontTestStrings_[d]=h)}}}if(!this.fontTestStrings_[d]){var i=webfont.FontApiParser.INT_FONTS[d];i&&(this.fontTestStrings_[d]=i)}this.parsedFontFamilies_.push(d),this.variations_[d]=e}},webfont.FontApiParser.prototype.generateFontVariationDescription_=function(a){if(!a.match(/^[\w ]+$/))return"";var b=webfont.FontApiParser.VARIATIONS[a];if(b)return b;var c=a.match(/^(\d*)(\w*)$/),d=c[1],e=c[2],f=e?e:"n",g=d?d.substr(0,1):"4",h=this.fvd_.expand([f,g].join(""));return h?this.fvd_.compact(h):null},webfont.FontApiParser.prototype.parseVariations_=function(a){var b=[];if(!a)return b;var c=a.split(","),d=c.length;for(var e=0;e<d;e++){var f=c[e],g=this.generateFontVariationDescription_(f);g&&b.push(g)}return b},webfont.FontApiParser.prototype.parseSubsets_=function(a){var b=[];return a?a.split(","):b},webfont.FontApiParser.prototype.getFontFamilies=function(){return this.parsedFontFamilies_},webfont.FontApiParser.prototype.getVariations=function(){return this.variations_},webfont.FontApiParser.prototype.getFontTestStrings=function(){return this.fontTestStrings_},webfont.GoogleFontApi=function(a,b,c){this.userAgent_=a,this.domHelper_=b,this.configuration_=c},webfont.GoogleFontApi.NAME="google",webfont.GoogleFontApi.prototype.supportUserAgent=function(a,b){b(a.isSupportingWebFont())},webfont.GoogleFontApi.prototype.getFontWatchRunnerCtor=function(){return this.userAgent_.getEngine()=="AppleWebKit"?webfont.LastResortWebKitFontWatchRunner:webfont.FontWatchRunner},webfont.GoogleFontApi.prototype.load=function(a){var b=this.domHelper_,c=this.userAgent_.getName()=="MSIE"&&this.configuration_["blocking"]!=1;c?b.whenBodyExists(webfont.bind(this,this.insertLink_,a)):this.insertLink_(a)},webfont.GoogleFontApi.prototype.insertLink_=function(a){var b=this.domHelper_,c=new webfont.FontApiUrlBuilder(this.configuration_.api),d=this.configuration_.families;c.setFontFamilies(d);var e=new webfont.FontApiParser(d);e.parse(),b.insertInto("head",b.createCssLink(c.build())),a(e.getFontFamilies(),e.getVariations(),e.getFontTestStrings())},window.WebFont.addModule(webfont.GoogleFontApi.NAME,function(a){var b=new webfont.UserAgentParser(navigator.userAgent,document),c=b.parse();return new webfont.GoogleFontApi(c,new webfont.DomHelper(document,c),a)}),webfont.CustomCss=function(a,b){this.domHelper_=a,this.configuration_=b},webfont.CustomCss.NAME="custom",webfont.CustomCss.prototype.load=function(a){var b=this.configuration_.urls||[],c=this.configuration_.families||[];for(var d=0,e=b.length;d<e;d++){var f=b[d];this.domHelper_.insertInto("head",this.domHelper_.createCssLink(f))}a(c)},webfont.CustomCss.prototype.supportUserAgent=function(a,b){return b(a.isSupportingWebFont())},window.WebFont.addModule(webfont.CustomCss.NAME,function(a){var b=new webfont.UserAgentParser(navigator.userAgent,document),c=b.parse(),d=new webfont.DomHelper(document,c);return new webfont.CustomCss(d,a)}),webfont.FontdeckScript=function(a,b,c){this.global_=a,this.domHelper_=b,this.configuration_=c,this.fontFamilies_=[],this.fontVariations_={},this.fvd_=new webfont.FontVariationDescription},webfont.FontdeckScript.NAME="fontdeck",webfont.FontdeckScript.HOOK="__webfontfontdeckmodule__",webfont.FontdeckScript.API="//f.fontdeck.com/s/css/js/",webfont.FontdeckScript.prototype.getScriptSrc=function(a){var b="https:"==this.global_.location.protocol?"https:":"http:",c=this.configuration_.api||webfont.FontdeckScript.API;return b+c+this.global_.document.location.hostname+"/"+a+".js"},webfont.FontdeckScript.prototype.supportUserAgent=function(a,b){var c=this.configuration_.id,d=this;if(c){this.global_[webfont.FontdeckScript.HOOK]||(this.global_[webfont.FontdeckScript.HOOK]={}),this.global_[webfont.FontdeckScript.HOOK][c]=function(a,c){for(var e=0,f=c.fonts.length;e<f;++e){var g=c.fonts[e];d.fontFamilies_.push(g.name),d.fontVariations_[g.name]=[d.fvd_.compact("font-weight:"+g.weight+";font-style:"+g.style)]}b(a)};var e=this.domHelper_.createScriptSrc(this.getScriptSrc(c));this.domHelper_.insertInto("head",e)}else b(!0)},webfont.FontdeckScript.prototype.load=function(a){a(this.fontFamilies_,this.fontVariations_)},window.WebFont.addModule(webfont.FontdeckScript.NAME,function(a){var b=new webfont.UserAgentParser(navigator.userAgent,document),c=b.parse(),d=new webfont.DomHelper(document,c);return new webfont.FontdeckScript(window,d,a)}),webfont.MonotypeScript=function(a,b,c,d,e){this.global_=a,this.userAgent_=b,this.domHelper_=c,this.doc_=d,this.configuration_=e,this.fontFamilies_=[],this.fontVariations_={}},webfont.MonotypeScript.NAME="monotype",webfont.MonotypeScript.HOOK="__mti_fntLst",webfont.MonotypeScript.SCRIPTID="__MonotypeAPIScript__",webfont.MonotypeScript.prototype.supportUserAgent=function(a,b){var c=this,d=c.configuration_.projectId;if(d){var e=c.domHelper_.createScriptSrc(c.getScriptSrc(d));e.id=webfont.MonotypeScript.SCRIPTID+d,e.onreadystatechange=function(a){if(e.readyState==="loaded"||e.readyState==="complete")e.onreadystatechange=null,e.onload(a)},e.onload=function(e){if(c.global_[webfont.MonotypeScript.HOOK+d]){var f=c.global_[webfont.MonotypeScript.HOOK+d]();if(f&&f.length){var g;for(g=0;g<f.length;g++)c.fontFamilies_.push(f[g].fontfamily)}}b(a.isSupportingWebFont())},this.domHelper_.insertInto("head",e)}else b(!0)},webfont.MonotypeScript.prototype.getScriptSrc=function(a){var b=this.protocol(),c=(this.configuration_.api||"fast.fonts.com/jsapi").replace(/^.*http(s?):(\/\/)?/,"");return b+"//"+c+"/"+a+".js"},webfont.MonotypeScript.prototype.load=function(a){a(this.fontFamilies_,this.fontVariations_)},webfont.MonotypeScript.prototype.protocol=function(){var a=["http:","https:"],b=a[0];if(this.doc_&&this.doc_.location&&this.doc_.location.protocol){var c=0;for(c=0;c<a.length;c++)if(this.doc_.location.protocol===a[c])return this.doc_.location.protocol}return b},window.WebFont.addModule(webfont.MonotypeScript.NAME,function(a
){var b=new webfont.UserAgentParser(navigator.userAgent,document),c=b.parse(),d=new webfont.DomHelper(document,c);return new webfont.MonotypeScript(window,c,d,document,a)}),webfont.TypekitScript=function(a,b,c){this.global_=a,this.domHelper_=b,this.configuration_=c,this.fontFamilies_=[],this.fontVariations_={}},webfont.TypekitScript.NAME="typekit",webfont.TypekitScript.HOOK="__webfonttypekitmodule__",webfont.TypekitScript.prototype.getScriptSrc=function(a){var b="https:"==window.location.protocol?"https:":"http:",c=this.configuration_.api||b+"//use.typekit.com";return c+"/"+a+".js"},webfont.TypekitScript.prototype.supportUserAgent=function(a,b){var c=this.configuration_.id,d=this.configuration_,e=this;if(c){this.global_[webfont.TypekitScript.HOOK]||(this.global_[webfont.TypekitScript.HOOK]={}),this.global_[webfont.TypekitScript.HOOK][c]=function(c){var f=function(a,c,d){e.fontFamilies_=c,e.fontVariations_=d,b(a)};c(a,d,f)};var f=this.domHelper_.createScriptSrc(this.getScriptSrc(c));this.domHelper_.insertInto("head",f)}else b(!0)},webfont.TypekitScript.prototype.load=function(a){a(this.fontFamilies_,this.fontVariations_)},window.WebFont.addModule(webfont.TypekitScript.NAME,function(a){var b=new webfont.UserAgentParser(navigator.userAgent,document),c=b.parse(),d=new webfont.DomHelper(document,c);return new webfont.TypekitScript(window,d,a)}),window.WebFontConfig&&window.WebFont.load(window.WebFontConfig)