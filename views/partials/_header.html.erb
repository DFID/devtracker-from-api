<a href="#" class="govuk-skip-link" data-module="govuk-skip-link">Skip to main content</a>
<header class="govuk-header app-header " role="banner" data-module="govuk-header">
    <div class="app-header__container">
        <div class="app-width-container app-header__content">
            <div class="app-header__content--logo">
                <a href="/" class="govuk-header__link govuk-header__link--homepage app-header__link">
                    <span class="govuk-header__logotype">
                        <img src="/assets/images/govuk-crown.svg" class="govuk-header__logotype-crown" alt="GovUK" />
                        <span class="govuk-header__logotype-text">
                            GOV.UK
                        </span>
                    </span>
                </a>
                <a href="/" class="app-header__link">
                    <span class="govuk-header__product-name app-header__product-name">
                        Development Tracker
                    </span>
                </a>
            </div>
            <div class="app-header__content--controls">
                <button class="app-header__menu-button" data-module="govuk-button" id="toggleGlobalMenu" onclick="toggleGlobalMenu()">Menu</button>
                <button class="app-header__search-button" data-module="govuk-button" id="toggleGlobalSearch" onclick="toggleGlobalSearch()"></button>
            </div>
        </div>
    </div>
</header>
<form action="/search" method="post" id="headerSearchForm" onsubmit="return validateHeaderSearch()">
    <div id="globalSearch" class="app-header__search app-element-hidden">
        <div class="govuk-width-container">
            <div class="govuk-form-group" id="headerSearchFormGroup">
                <h1 class="govuk-label-wrapper">
                    <label class="govuk-label govuk-label--m" for="event-name">
                        Search Programmes
                    </label>
                </h1>
                <div id="event-name-hint" class="govuk-hint">
                    Enter location, sector, organisation or keyword
                </div>
                <p id="headerSearchErrorMessage" class="govuk-error-message app-display-none">
                    <span class="govuk-visually-hidden">Error:</span> Please enter a search query
                 </p>
                <div class="app-header__search-input">
                    <input class="govuk-input" id="query" name="query" type="text" aria-describedby="event-name-hint">
                    <button data-module="govuk-button" id="front-search-submit"></button>
                </div>
                <div class="app-search-form__checkbox">
                    <div class="govuk-checkboxes govuk-checkboxes--small" data-module="govuk-checkboxes">
                        <div class="govuk-checkboxes__item">
                            <input class="govuk-checkboxes__input" id="includeClosed" name="includeClosed" type="checkbox" value="hmrc">
                            <label class="govuk-label govuk-checkboxes__label" for="includeClosed">
                                Include closed programmes
                            </label>
                        </div>
                    </div>
                </div>
            </div>
            <!--<h2 class="govuk-heading-m">Popular searches</h2>
            <ul class="govuk-list">
                <li>
                    <a class="govuk-link" href="#">Ukraine costs</a>
                </li>
                <li>
                    <a class="govuk-link" href="#">Iraq aid</a>
                </li>
                <li>
                    <a class="govuk-link" href="#">Oversea costs</a>
                </li>
            </ul>-->
        </div>
    </div>
</form>
<div class="app-header__navigation" id="globalMenu">
    <nav aria-label="Menu" class="govuk-width-container app-width-container">
        <div class="app-header__navigation-content">
            <ul id="navigation" class="govuk-header__navigation-list">
                <li class="govuk-header__navigation-item app-header__navigation-item">
                    <a class="govuk-header__link app-header__link" href="/">
                        Home
                    </a>
                </li>
                <li class="govuk-header__navigation-item app-header__navigation-item" id="navItemSector">
                    <a class="govuk-header__link app-header__link" href="/sector">
                        Aid by Sector
                    </a>
                </li>
                <li class="govuk-header__navigation-item app-header__navigation-item" id="navItemLocation">
                    <a class="govuk-header__link app-header__link" href="/location/country">
                        Aid by Location
                    </a>
                </li>
                <li class="govuk-header__navigation-item app-header__navigation-item" id="navItemDepartment">
                    <a class="govuk-header__link app-header__link" href="/department">
                        Aid by Department
                    </a>
                </li>
            </ul>
        </div>
    </nav>
</div>

<script>
    function validateHeaderSearch() {
        let headerSearchQuery = document.forms["headerSearchForm"]["query"].value;
        let headerSearchFormGroup = document.getElementById("headerSearchFormGroup"); 
        let headerSearchInput = document.getElementById("query");
        let headerSearchErrorMessage = document.getElementById("headerSearchErrorMessage");
        if (headerSearchQuery == "") {
            headerSearchErrorMessage.style.display = "block";
            headerSearchFormGroup.className = "govuk-form-group govuk-form-group--error";
            headerSearchInput.className = "govuk-input govuk-input--error";
            return false;
        }
    }
    const currentPage = location.pathname.split('/')[1];
    if (currentPage == "sector") {
        document.getElementById("navItemSector").classList.add("app-header__navigation-item--active");
    } else if (currentPage == "location") {
        document.getElementById("navItemLocation").classList.add("app-header__navigation-item--active");
    } else if (currentPage == "department") {
        document.getElementById("navItemDepartment").classList.add("app-header__navigation-item--active");
    }
</script>